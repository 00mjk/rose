#!/bin/sh
set -e
if [ $# -ne 1 ]; then
  echo "Usage: $0 srcdir" 1>&2
  exit 1
fi
srcdir=$1
DIFF="diff -U5"
echo "testing interp1.C"
../CPAnalysis/ContainerAnalyzer --edg:no_warnings -w -annot $srcdir/Container.annot -I$srcdir $srcdir/UserDefList2b.C  
${DIFF} $srcdir/UserDefList2b.C.out.save UserDefList2b.C.out
rm UserDefList2b.C.out
../CPAnalysis/ContainerAnalyzer --edg:no_warnings -w -annot $srcdir/Container.annot -I$srcdir $srcdir/UserDefList2c.C
${DIFF} $srcdir/UserDefList2c.C.out.save UserDefList2c.C.out
rm UserDefList2c.C.out
../CPAnalysis/ContainerAnalyzer --edg:no_warnings -w -annot $srcdir/Container.annot -I$srcdir $srcdir/UserDefList3.C
${DIFF} $srcdir/UserDefList3.C.out.save UserDefList3.C.out
rm UserDefList3.C.out
../CPAnalysis/ContainerAnalyzer --edg:no_warnings -w -annot $srcdir/Container.annot -I$srcdir $srcdir/UserDefList2.C
${DIFF} $srcdir/UserDefList2.C.out.save UserDefList2.C.out
rm UserDefList2.C.out
../CPAnalysis/ContainerAnalyzer --edg:no_warnings -w -annot $srcdir/Container.annot -I$srcdir $srcdir/UserDefList2d.C
${DIFF} $srcdir/UserDefList2d.C.out.save UserDefList2d.C.out
rm UserDefList2d.C.out
../CPAnalysis/ContainerAnalyzer --edg:no_warnings -w -annot $srcdir/Container.annot -I$srcdir $srcdir/UserDefList.C
${DIFF} $srcdir/UserDefList.C.out.save UserDefList.C.out
rm UserDefList.C.out
