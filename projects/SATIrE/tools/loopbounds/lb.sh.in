#!/bin/bash
# Wrapper script for loopbounds.pl

prefix="@prefix@"
TERMITE_LIB="@datarootdir@/termite"

export TERMITE_LIB

if pl --version |grep -q SWI-Prolog; then 
   PL=pl    # Linux
else 
   PL=swipl # OS X, GNUstep
fi

echo "---- computing loop bounds for $1 ----"
../interval/interval --run-pointsto-analysis $1 --output-term=$1.term ||exit 1
$PL -q -O -t main -s loopbounds.pl < $1.term > $1.loops.term ||exit 1
