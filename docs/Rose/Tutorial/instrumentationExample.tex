\chapter{Instrumentation Translator}

\fixme{Consider making subsections for this section, so that we can present the high-level
       and mid-level AST rewrite mechanisms. Fix input example to work correctly with
       functions returning values (this should work).}

\begin{figure}[!ht]
{\indent
{\mySmallFontSize


% Do this when processing latex to generate non-html (not using latex2html)
\begin{latexonly}
   \lstinputlisting{\TutorialExampleDirectory/instrumentationExample.C}
\end{latexonly}

% Do this when processing latex to build html (using latex2html)
\begin{htmlonly}
   \verbatiminput{\TutorialExampleDirectory/instrumentationExample.C}
\end{htmlonly}

% end of scope in font size
}
% End of scope in indentation
}
\caption{Example source code to instrument any input program.}
\label{Tutorial:exampleInstrumentationTranslator}
\end{figure}

    Figure~\ref{Tutorial:exampleInstrumentationTranslator} shows the use of
the AST string based rewrite mechanism to add code to the top and bottom of 
each block within the AST.

   Figure~\ref{Tutorial:exampleInputCode_InstrumentationTranslator} shows the
input code used to get the translator.
Figure~\ref{Tutorial:exampleOutput_InstrumentationTranslator} shows the resulting output.

\begin{figure}[!ht]
{\indent
{\mySmallFontSize


% Do this when processing latex to generate non-html (not using latex2html)
\begin{latexonly}
   \lstinputlisting{\TutorialExampleDirectory/inputCode_InstrumentationTranslator.C}
\end{latexonly}

% Do this when processing latex to build html (using latex2html)
\begin{htmlonly}
   \verbatiminput{\TutorialExampleDirectory/inputCode_InstrumentationTranslator.C}
\end{htmlonly}

% end of scope in font size
}
% End of scope in indentation
}
\caption{Example source code used as input to instrumenting translator.}
\label{Tutorial:exampleInputCode_InstrumentationTranslator}
\end{figure}

\begin{figure}[!ht]
{\indent
{\mySmallFontSize


% Do this when processing latex to generate non-html (not using latex2html)
\begin{latexonly}
   \lstinputlisting{\TutorialExampleBuildDirectory/rose_inputCode_InstrumentationTranslator.C}
\end{latexonly}

% Do this when processing latex to build html (using latex2html)
\begin{htmlonly}
   \verbatiminput{\TutorialExampleBuildDirectory/rose_inputCode_InstrumentationTranslator.C}
\end{htmlonly}

% end of scope in font size
}
% End of scope in indentation
}
\caption{Output of input to instrumenting translator.}
\label{Tutorial:exampleOutput_InstrumentationTranslator}
\end{figure}

